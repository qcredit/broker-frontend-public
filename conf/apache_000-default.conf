<VirtualHost *:80>
  #ServerName www.example.com
  ServerAdmin webmaster@localhost
  DocumentRoot /var/www/html/public
  LogLevel info
  #LogLevel alert rewrite:trace3

  SetEnvIf X-Forwarded-For "^.*\..*\..*\..*" forwarded

  ErrorLog  "|/usr/bin/rotatelogs ${APACHE_LOG_DIR}/error.%Y-%m-%d.log  86400"
  CustomLog "|/usr/bin/rotatelogs ${APACHE_LOG_DIR}/access.%Y-%m-%d.log 86400" combined env=!forwarded
  CustomLog "|/usr/bin/rotatelogs ${APACHE_LOG_DIR}/access.%Y-%m-%d.log 86400" proxy env=forwarded

  RemoteIPHeader X-Forwarded-For
  RemoteIPProxiesHeader X-Forwarded-By
</VirtualHost>